# JS基础

## --- 基础 ---

### 1.字面量

字面量（literal）是在计算机中描述事或物

> - 100 为数字字面量
> - '这是字符串' 为字符串字面量
> - \[ \] 为数组字面量
> - \{ \} 为对象字面量

> 声明了一个空数组，里面没有内容，let arr = [ ]，则输出的话是**undefined**

### 2.数据类型

**基本数据类型**

> 即简单数据类型，在存储时变量中存储的是值本身，故为**值类型**
>
> string、number、boolean、undefined、null、symbol

> **null：**表示赋值了，但内容为空
>
> **undefined：**表示没有赋值

**引用数据类型**

> 即复杂数据类型，在存储时变量中存储的仅仅是**地址（引用）**，故为**引用数据类型**
>
> 通过 new 关键字创建的对象（系统对象、自定义对象），如Object、Array、Date等

注意：

> - JS 是弱数据类型，变量属于那种类型，只有赋值之后才知道
> - Java 是强数据类型

### 3.类型转换

Boolean转换

> **'  '、0、undefined、null、false、NaN** 转换为布尔值后都为 **false**，其余则为 **true**

隐式转换

> - 任何数据 + 字符串 结果都为字符串
> - 减法 -（像大多数数学运算一样）只能用与数字，它会使空字符串 " " 转换为0
> - null 经过数字转换之后会变成 0
> - undefined 经过数字转换之后会变成 NaN
> - **+ **号为正号解析可以转换成数字型

显示转换

> **Number()** 字符串内容里有非数字得到NaN
>
> **parseInt()**
>
> **parseFloat()**
>
> **String()**
>
> **变量.toString(进制)**

### 4.模板字符串

> **反引号 \` `**
>
> 内容拼接变量时，用 **\$\{ 变量名 }** 包住变量



## --- 运算符 ---

### 1.赋值运算符

### 2.一元运算符

### 3.比较运算符

### 4.逻辑运算符

逻辑中断

js 利用逻辑运算符 **&&** 和 **||** 代替 if else 写判断语句

```javascript
console.log(11 && 22)	// 22
console.log(false && hello)	// false
console.log(33 || 44)	// 33
console.log(0 || 55)	// 55
```

> **a && b** **一假则假**，左边为false就短路
>
> **&& 前面是 true**，无论 && 后面是true还是false，结果都将返 && **后面**的值;
>
> **&& 前面是 false**，无论 && 后面是true还是 false，结果都将返 && **前面**的值;

> **a || b** **一真则真**，左边为true就短路
>
> **|| 前面为 true**，无论 || 后面是true还是 false，结果都返回 || **前面**的值。
>
> **|| 前面为 false**，无论 || 后面是true还是 false，结果都返回 || 后面的值。

### 5.运算符优先级

| 优先级 | 运算符     | 顺序            |
| ------ | ---------- | --------------- |
| 1      | 小括号     | ()              |
| 2      | 一元运算符 | ++、--、!       |
| 3      | 算数运算符 | 先 * / % 后 + - |
| 4      | 关系运算符 | > >= < <=       |
| 5      | 相等运算符 | \== != \=== !== |
| 6      | 逻辑运算符 | 先 && 后 \| \|  |
| 7      | 赋值运算符 | =               |
| 8      | 逗号运算符 | ,               |



## --- 语句 ---

### 1.表达式和语句

### 2.分支语句

#### switch语句

> switch case 语句一般用于等值判断，不适合区间判断
>
> switch case 一般需要配合break关键字使用，没有break会造成**case穿透**

### 3.循环语句

#### for循环

> **while(true)** 来构造"无限循环"，需要使用break退出循环
>
> **for(; ;)** 也可以来构造 "无限循环"，同样需要使用break退出循环

> **for in循环** 用于遍历数组或者对象的属性, 但是我们不推荐使用for in遍历数组

## --- 函数 ---

> 定义函数时可以不指定返回类型

### 声明函数

声明函数的5种方法：

1. function声明

```js
// 声明
function fun(){
    console.log('这是一个函数的打印结果')
} 
// 调用
fun()
```

2. 匿名函数

```js
function(){
    console.log('这是一个匿名函数的打印') 
} 
```

> 但是由于匿名函数在创建后无法访问，并且只能通过赋值给变量来访问，如下函数表达式

3. 函数表达式

```js
let fun = function(){
    console.log('这是一个函数表达式的打印') 
} 
fun()
```

4. 箭头函数

```js
() => console.log('这是一个箭头函数的打印') 
```

> 但是，由于箭头函数没有名称，如果我们要调用它，它应该存储在一个变量中，就像函数表达式一样

5. 构造函数

声明函数的另一种方法是使用带有 `new` 关键字的 `Function` 构造函数

```js
let funcName = new Function("arg1", "arg2", "arg3", ..., "函数体") 
```

例子：

```js
let sum = new Function("a","b","return a + b");
console.log(sum(5,6)) 
```



### return

> return 后面**不接数据**或函数内**不写return**，函数的默认返回值是**undefined**
>
> **返回数组**来实现返回多个值

### 作用域

> 如果函数内部，变量**没有声明**。直接赋值，也可以当**全局变量**看待，==不推荐==
>
> 函数内部的形参可以看做局部变量
>
> 变量访问的原则是**就近原则**

### 立即执行函数

防止变量污染，减少变量名冲突

```javascript
// 方式一，第二个小括号相当于调用函数，其小括号里面的参数为形参
(function () {}) ();
// 例如：
(function () {
    console.log(22)
}) ();

// 方式二
(function (x, y) {} (1, 2));

// 方式三
!function () {} ();
```

多个立即执行函数要用 ；隔开，不然会报错



## --- 对象 ---

对象是一种数据类型，一种无序的数据的集合，可以详细的描述某个事物

###  1.对象的使用

[参考文章](https://blog.csdn.net/qq_22182989/article/details/125610773?ops_request_misc=&request_id=&biz_id=102&utm_term=js%E5%AF%B9%E8%B1%A1%E4%BD%BF%E7%94%A8%E6%9F%A5%E7%9C%8B%E5%B1%9E%E6%80%A7&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-0-125610773.142^v83^insert_down38,239^v2^insert_chatgpt&spm=1018.2226.3001.4187)

对象由属性（静态）和方法（即函数，动态）组成

对象里面可以存储任何数据类型

```javascript
// 方法一：
对象名.属性名 === 对象名.['属性名']
// 访问对象的方法的时候，只能用.访问
对象名.方法

// 方法二：属性名是动态，属性名可为字符串，一定要加引号
对象名['属性名']
// 如果是变量是不需要加引号的
对象名[变量名]
```

> 1. 点属性访问器：**`object.property === object['property']`**
> 2. 中括号属性访问：**`object[property]`**，如果是变量则不需要加引号
> 3. 对象解构：**`const { property } = object`**

### 2.遍历对象

```javascript
let obj = {
    uname: '胡禄敬',
    age: 18,
    gender: '男',
    speak: function () {
 			document.write('我喜欢跑步！')
    }
}
// 遍历对象用 for in循环
for (let k in obj) {
    console.log(k)	// k 是获得对象的 属性名，属性名 'uname'，'age'
    console.log(obj[k])	// 	对象名[k] 是获得 属性值
    
    console.log(obj.k)	// 报错undefined，等价于obj.'uname'
}
// 调用方法
obj.speak()
```

### 3.内置对象

JavaScript 中的对象分为3种：**自定义对象**、**内置对象**、**浏览器对象**

前面两种对象是 JS 基础内容，属于 ECMAScript；第三个浏览器对象属于 JS 独有的（JS API 讲解）

- 内置对象：JS 语言自带的一些对象，供开发者使用，并提供一些常用的或是最基本而非必要的功能（属性和方法）
- 内置对象最大的优点就是可以帮助快速开发
- JavaScript 提供多个内置对象：Math、Date、Array、String等

#### random

```javascript
// 随机数函数，返回一个0-1之间，[0，1)
Math.random()
// 随机生成一个0-M之间的随机数
Math.floor(Math.random() * (M + 1)) 
// 随机生成一个N-M之间的随机数[N, M]
Math.floor(Math.random() * (M - N + 1)) + N 
```

### 4.数组对象

#### 4.1 创建数组

两种方式：

1. 利用<strong style="color:#DD5145">数组字面量</strong>

   ```javascript
   const arr = [1,2,3];
   console.log(arr[0]);
   ```

1. 利用 <strong style="color:#DD5145">new Array( )</strong>

   ```javascript
   const arr = new Array(2);		// 创建了一个长度为2的空数组
   const arr1 = new Array(2,3);	// 创建了一个数组[2,3]
   ```

#### 4.2 检查是否为数组

1. instanceof 运算符

   ```javascript
   const arr = [];
   console.log(arr instanceof Array);
   ```

2. Array.isArray(参数)，H5新增的方法，IE9 以上才支持

   ```javascript
   console.log(Array.isArray(arr)); 
   ```

#### 4.3 数组操作

| 方法名        | 说明                                                 | 返回值                 |
| ------------- | ---------------------------------------------------- | ---------------------- |
| push(参数)    | 末尾添加一个或多个元素，注意修改原数组               | 返回新的长度           |
| pop( )        | 删除数组最后一个元素，数组长度+1，无参数、修改原数组 | 返回它删除的元素值     |
| unshift(参数) | 向数组的开头添加一个或多个元素，注意修改原数组       | 返回新的长度           |
| shift( )      | 删除数组的第一个元素                                 | 返回第一个元素的值     |
| slice( )      | 数组**截取** slice(begin, end)                       | 返回被截取项目的新数组 |
| concat( )     | 连接两个或多个数组，不影响原数组                     | 返回一个新数组         |



splice() 是 JavaScript 数组对象的一个方法：

| 方法名                         | 说明                                                         | 返回值        |
| ------------------------------ | ------------------------------------------------------------ | ------------- |
| **`splice(index)`**            | 从元素下标index开始，**删除**之后**所有元素**                | 返回 删除内容 |
| splice(index,howmany)          | **删除**元素，index为起始位置，howmany为删除的个数，<br>若 howmany 小于等于 0，则不删除 | 返回 删除内容 |
| splice(index, 0, item ...)     | index为插入位置，在index**之前**  **插入**元素，item为插入元素 | 返回 删除内容 |
| splice(index,howmany,item ...) | **替换**元素，index为起始位置，howmany为被删除的元素个数，<br>item为插入的新值（先删除后插入达到替换目的） | 返回 删除内容 |

> 注意，**splice() 函数会改变原始数组**



#### 4.4 数组转换为字符串

| 方法名               | 说明                                             | 返回值         |
| -------------------- | ------------------------------------------------ | -------------- |
| toString( )          | 把数组转换成字符串，逗号分隔每一项               | 返回一个字符串 |
| **`join('分隔符')`** | 方法用于把数组中的所有元素转换成为一个**字符串** | 返回一个字符串 |

**数组 join 方法：**

**join（）**方法用于把 **数组** 中的所有元素 **转换为一个字符串**，数组元素是通过参数里面指定的 **分隔符** 进行分隔的

```javascript
const arr = ['red颜色','blue颜色','green颜色']
console.log(arr.join(''))	// red颜色blue颜色green颜色

// 与split('分隔符') （把字符串转换为数组）相反
```

#### 4.5 数组排序

| 方法名     | 说明                           | 是否修改原数组               |
| ---------- | ------------------------------ | ---------------------------- |
| reverse( ) | 颠倒数组中的元素的顺序，无参数 | 会改变原数组，返回一个新数组 |
| sort( )    | 对数组的元素进行排序           | 会改变原数组，返回一个新数组 |

**sort排序：**`arr.sort([compareFunction])`

返回值为排序后的数组。注意，数组已原地排序，并且不进行复制（**返回的是原地排序的原数组**，并不是创建的新数组）

```javascript
// 升序排序，第一个参数是前一个对象，第二个参数是后一个对象
arr.sort(function (a, b) {
    return a - b
})

// 降序排序
arr.sort(function (a, b) {
    return b - a
})
// 若 a = b，则返回 0

// 教大家一个最好记的方法：
// 1.第一个参数是升序，第二个参数是降序
// 2.如果想要xx序，就用xx序参数 - 另外一个参数
```



### 5.字符串对象

**1.字符串的不可变**

指的是里面的值不可变，虽然看上去可以改变内容，但其实是地址变了，内存中新开辟了一个内存空间

**2.根据字符返回位置**

字符串所有的方法，都不会修改字符串本身，操作完成会**返回一个新的字符串**

| 方法名         | 说明                                                |
| -------------- | --------------------------------------------------- |
| indexOf( )     | 返回指定内容在原字符串中的下标，如果找不到就返回 -1 |
| indexO(' ')    | indexOf一个空字符串的返回值是0                      |
| lastIndexOf( ) | 从后往前找，只找第一个匹配的                        |

**3.根据位置返回字符（重点）**

| 方法名              | 说明                                        |
| ------------------- | ------------------------------------------- |
| **`charAt(index)`** | 返回指定位置的字符（index 字符串的索引号）  |
| charCodeAt(index)   | 获取指定位置处字符的ASCII码（index 索引号） |
| str[index]          | 获取指定位置处字符                          |

**4.字符串操作方法（重点）**

| 方法名                                      | 说明                                                         |
| ------------------------------------------- | ------------------------------------------------------------ |
| concat(str1,str2,str3...)                   | concat() 方法用于连接两个或多个字符串。拼接字符串，等效于+，+更常用 |
| substr(start,lenght)                        | 从start 位置开始（索引号），length 取的个数                  |
| slice(start,end)                            | 从start 位置开始，截取到end 位置，end 取不到（他们俩都是索引号） |
| substring(start,end)                        | 从start 位置开始，截取到end 位置，end 取不到，基本和slice 相同，但不接受负值 |
| **`replace('被替换的字符', '替换的字符')`** | 替换字符，它只会替换第一个字符                               |
| **`split('分隔符')`**                       | 字符串转换为**数组**，与 join() （把数组转换为字符串）相反   |



## 拓展

### 栈和堆空间分配

栈：由操作系统自动分配释放函数的参数值、局部变量的值等

> 简单数据类型存放到栈里面

堆：存储复杂类型（对象），一般由程序员分配释放、若程序员不释放，由垃圾回收机制回收

> 引用数据类型存放到堆里面