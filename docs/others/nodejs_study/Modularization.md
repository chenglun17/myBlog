# 模块化

## :star:模块化介绍

1. 什么是模块化与模块？
   - 是指解决一个复杂问题时，**自顶向下**逐层把系统划分成若干模块的过程，将一个复杂的程序文件依据一定规则拆分成多个文件的过程称之为 **模块化**。
   - 其中拆分出的 **每个文件就是一个模块**，模块的内部数据是私有的不过模块可以暴露内部数据以便其他模块使用

2. 什么是模块化项目？
   - 编码时按照模块一个一个编码的，整个项目就是一个模块化的项目

3. 模块化的好处
   - 防止命名冲突
   - 高复用性
   - 高维护性



## :star:暴露数据

模块暴露数据的两种方式：

- `module.exports = value`
- `exports.属性名 = value`

注意：

- `module.exports` 可以暴露**任意数据**
- 不能使用 `exports = value` 的形式暴露数据
- 隐式关系：`exports = module.exports = {}`

## :star:导入（引入）模块

Node.js 中模块的分类，根据模块来源的不同，将模块分为了 3 大类：

- **内置模块**（内置模块是由 Node.js 官方提供的，例如 fs、path、http 等）
- **自定义模块**（用户创建的每个 .js 文件，都是自定义模块）
- **第三方模块**（由第三方开发出来的模块，使用前需要先下载）

在模块中使用 **require** 传入文件路径即可引入文件：

```javascript
const demo = require('./me.js')
```

**require 使用的一些注意事项：**

1. 对于自己创建的模块，导入时路径建议写 **相对路径**，且不能省略 **./** 和 **../**

2. **js** 和 **json** 文件导入时可以不用写后缀，c/c++ 编写的 node 扩展文件也可以不用写后缀

3. 如果导入其他类型的文件，会以 **js**文件类型进行处理

4. 同名文件且没有写后缀，优先导入 js文件

5. 如果导入路径是一个文件夹，则首先检测文件夹下 **package.json** 文件中的 **main属性**对应的文件，<br>如果 main属性不存在，或 package.json 不存在，则会检测文件夹下的 **index.js** 和 **index.json** 文件，如果还是没有找到，就会报错

6. 导入 node.js **内置模块**时，直接 require 模块的名字即可，无需加 **./** 和 **../**

导出模块的时候：**require 的返回结果** 是目标模块中 **module.exports 的值**，并不是 exports 的值



## :star:CommonJS 规范

**module.exports**、**exports** 以及 **require** 这些都是 **CommonJS 模块化规范**的内容，<br>而 Node.js 是实现了 CommonJS 模块化规范，二者关系类似 JavaScript 与 ECMAScript

CommonJS 规定了模块的特性和各模块之间如何相互依赖：

- 每个模块内部，module 变量代表当前模块
- module 变量是一个对象，它的 exports 属性（即 module.exports）是对外的接口
- 加载某个模块，其实是加载该模块的 module.exports 属性。**require() 方法用于加载模块**